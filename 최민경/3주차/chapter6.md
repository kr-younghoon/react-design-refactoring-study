# chapter 6

## 6.1 리팩토링 이해하기

**리팩토링은**

한번의 대청소를 통해 완벽한 코드베이스를 만드는 것이 아니라,

**작고 점진적인 개선을 오랜시간 지속해서 수행** 하는것

## 6.2 리팩토링 전 테스트 추가하기

### 6.2.1 변수 이름 바꾸기

- 내부에서 중복된 부분은 제거
- 보다 의미를 잘 드러내는 이름으로 바꾸기

## 6.3 변수 추출하기

- 복잡한 표현식을 작고 다루기 쉬운 부분으로 나누어 단순화하는 변수 추출

### @ 매직넘버 사용하지 않기

https://frontend-fundamentals.com/code-quality/code/examples/magic-number-readability.html#%E1%84%86%E1%85%A2%E1%84%8C%E1%85%B5%E1%86%A8-%E1%84%82%E1%85%A5%E1%86%B7%E1%84%87%E1%85%A5%E1%84%8B%E1%85%A6-%E1%84%8B%E1%85%B5%E1%84%85%E1%85%B3%E1%86%B7-%E1%84%87%E1%85%AE%E1%87%80%E1%84%8B%E1%85%B5%E1%84%80%E1%85%B5

```tsx
// 예제

// BAD
async function onLikeClick() {
  await postLike(url);
  await delay(300);
  await refetchPostLike();
}

// GOOD
const ANIMATION_DELAY_MS = 300;

async function onLikeClick() {
  await postLike(url);
  await delay(ANIMATION_DELAY_MS);
  await refetchPostLike();
}
```

위의 경우 300이 뭘 의미하는지 명확히 알 수 없음

하나의 코드를 여러 명의 개발자가 수정하다보면 코드가 원하지 않는 방향으로 수정될 수 있음

그러므로 매직넘버 사용을 지양해서 동료들에게 정확한 의도를 전달하기

## 6.4 반복문 → 파이프라인

고차함수 Or map, filter, reduce 등의 메소드 사용

## 6.5 함수 추출하기

- 코드를 보았을 때 “무엇”을 하는지 알 수 있도록 함수명을 짓기
- 하나의 목적을 가지고 한 가지 일만

## 6.6 매개변수 객체 도입

## 6.7 조건문 분해하기

## 6.8 함수 이동하기

---

### @ 리팩토링을 하기 쉽게 하기 위해서는

1. **주석**

   서로 기능파악이 어려울때가 많아 기능 단위로 주석 필수 작성 ⇒ 코드 파악 시간 줄이기

2. **직관적인 네이밍**

   이름부터 무슨 역할을 하는 변수인지, 무슨 기능을 하는 함수인지 직관적인 네이밍 사용하기 ⇒ 코드 읽기 전 대략적인 파악 가능

3. **일관된 네이밍과 스타일 유지하기**

   팀 내에서 정한 컨벤션을 일관되게 지키기 ⇒ 코드가 더 직관적이고 이해하기 쉬워져서 수정이나 협업 시 시간과 노력을 아낄 수 있음

### @ 리팩터링에서 금지하는것

1. 기능 변경/추가 금지!
2. 버그 수정 금지!
3. 성능 개선 금지!
4. 버전 업데이트 금지!

_누군가가 리팩터링하다가 코드가 깨져서 며칠이나 고생했다 라고 한다면, 십중팔구 리팩터링한 것이 아니다._
